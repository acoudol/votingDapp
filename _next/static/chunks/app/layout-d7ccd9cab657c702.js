(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{8883:function(e,t,n){Promise.resolve().then(n.bind(n,43398)),Promise.resolve().then(n.bind(n,581)),Promise.resolve().then(n.bind(n,51922)),Promise.resolve().then(n.bind(n,50834)),Promise.resolve().then(n.bind(n,91584)),Promise.resolve().then(n.bind(n,11236)),Promise.resolve().then(n.t.bind(n,54089,23))},43398:function(e,t,n){"use strict";n.r(t);var a=n(57437),r=n(45009);n(80867);var s=n(78959),i=n(70664),o=n(60604),u=n(54177),d=n(47082),p=n(73335),l=n(10167);let c=(0,s.vX)({appName:"Voting",projectId:"cd9786b258532a22fefb14c528c6e9f2",chains:[p.D,l.c],ssr:!0}),y=new u.S;t.default=e=>{let{children:t}=e;return(0,a.jsx)(o.F,{config:c,children:(0,a.jsx)(d.aH,{client:y,children:(0,a.jsx)(s.pj,{modalSize:"compact",theme:(0,i.W)({accentColor:"#4C7085",accentColorForeground:"white",borderRadius:"large",fontStack:"system",overlayBlur:"small"}),children:(0,a.jsx)(r.x,{children:t})})})})}},581:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(57437),r=n(54285),s=n(45059),i=n(8308),o=n(78959);n(82481);var u=()=>(0,a.jsxs)(r.k,{direction:"row",justify:"space-between",align:"center",width:"100%",children:[(0,a.jsx)(r.k,{justify:"flex-start",width:"300px",paddingY:"10px",paddingLeft:"30px",children:(0,a.jsx)(s.E,{src:"/votingDapp/ballot.png",alt:"ballot",height:"70px"})}),(0,a.jsx)(r.k,{justify:"center",width:"300px",children:(0,a.jsx)(i.xu,{fontSize:"50px",children:"Voting"})}),(0,a.jsx)(r.k,{justify:"flex-end",width:"300px",paddingRight:"30px",children:(0,a.jsx)(o.NL,{showBalance:!1})})]}),d=e=>{let{children:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.k,{direction:"column",bg:"#F2F3F5",paddingTop:"5px",paddingBottom:"10px",minHeight:"100vh",children:(0,a.jsxs)(r.k,{direction:"column",boxShadow:"3px 3px 5px -3px rgba(141, 153, 169, 0.94)",margin:"0px 25px",borderRadius:"xl",border:"1px solid #C1D2E8",grow:"1",children:[(0,a.jsx)(r.k,{direction:"row",align:"stretch",borderTopRadius:"xl",bg:"gray.400",grow:"0",children:(0,a.jsx)(u,{})}),(0,a.jsx)(r.k,{borderBottomRadius:"xl",bg:"gray.100",grow:"1",children:t})]})})})}},51922:function(e,t,n){"use strict";n.r(t),n.d(t,{ProposalsContext:function(){return l}});var a=n(57437),r=n(2265),s=n(69908),i=n(34771),o=n(99190),u=n(50834),d=n(94741),p=n(65454);let l=(0,r.createContext)(null);t.default=e=>{let{children:t}=e,[n,c]=(0,r.useState)([]),{user:y}=(0,r.useContext)(u.UserContext),m=async()=>{if(y.isAVoter){let e=await p.z.getLogs({address:o.i,event:(0,i.s)("event ProposalRegistered(uint proposalId)"),fromBlock:5505407n,toBlock:"latest"}),t=[];for(let n=0;n<e.length;n++){let e=await p.z.readContract({address:o.i,abi:o.M,functionName:"getOneProposal",args:[n+1],account:y.address});e.id=n+1,t.push(e)}c(t)}else c([])};(0,r.useEffect)(()=>{m()},[y]);let{data:f,error:b,status:h,refetch:x}=(0,s.u)({abi:o.M,address:o.i,functionName:"winningProposalID"}),g=(0,d.p)();return(0,r.useEffect)(()=>{"error"===h&&g({title:"An error has occurred : ".concat(b),status:"error",duration:3e3,isClosable:!0})},[h]),(0,a.jsx)(l.Provider,{value:{proposals:n,updateProposals:m,winningProposalID:f,updateWinningProposalID:x},children:t})}},50834:function(e,t,n){"use strict";n.r(t),n.d(t,{UserContext:function(){return u}});var a=n(57437),r=n(2265),s=n(69908),i=n(39296),o=n(99190);let u=(0,r.createContext)(null),d={isTheOwner:!1,isAVoter:!1,hasVoted:!1,isConnected:!1,address:void 0};t.default=e=>{let{children:t}=e,[n,p]=(0,r.useState)(d),{data:l,isFetched:c,error:y}=(0,s.u)({abi:o.M,address:o.i,functionName:"owner"}),{address:m,isConnected:f}=(0,i.m)(),{data:b,isFetched:h,error:x,refetch:g,isRefetching:v,fetchStatus:w}=(0,s.u)({abi:o.M,address:o.i,functionName:"getVoter",args:[m],account:m});return(0,r.useEffect)(()=>{f?p({isTheOwner:m===l,isAVoter:null==b?void 0:b.isRegistered,hasVoted:null==b?void 0:b.hasVoted,isConnected:!0,address:m}):p(d)},[l,f,b,v]),(0,a.jsx)(u.Provider,{value:{user:n,updateUser:()=>{g()}},children:t})}},91584:function(e,t,n){"use strict";n.r(t),n.d(t,{VotersContext:function(){return p}});var a=n(57437),r=n(2265),s=n(34771),i=n(71264),o=n(99190),u=n(50834),d=n(65454);let p=(0,r.createContext)(null);t.default=e=>{let{children:t}=e,[n,l]=(0,r.useState)([]),{user:c}=(0,r.useContext)(u.UserContext),y=async()=>{if(c.isAVoter){let e=await d.z.getLogs({address:o.i,event:(0,s.s)("event VoterRegistered(address voterAddress)"),fromBlock:5504934n,toBlock:"latest"}),t=[];for(let n=0;n<e.length;n++){let a=(0,i.f)(e[n].data),r=await d.z.readContract({address:o.i,abi:o.M,functionName:"getVoter",args:[a],account:c.address});r.address=a,t.push(r)}l(t)}else l([])};return(0,r.useEffect)(()=>{y()},[c]),(0,a.jsx)(p.Provider,{value:{voters:n,updateVoters:y},children:t})}},11236:function(e,t,n){"use strict";n.r(t),n.d(t,{WorkflowContext:function(){return o}});var a=n(57437),r=n(2265),s=n(69908),i=n(99190);let o=(0,r.createContext)(null);t.default=e=>{let{children:t}=e,[n,u]=(0,r.useState)(0),{data:d,isFetched:p,error:l,isRefetching:c,fetchStatus:y,refetch:m}=(0,s.u)({abi:i.M,address:i.i,functionName:"workflowStatus"});return(0,r.useEffect)(()=>{p&&u(d)},[p,c]),(0,a.jsx)(o.Provider,{value:{workflowStatus:n,updateWorkflowStatus:()=>{m()}},children:t})}},82481:function(){},99190:function(e,t,n){"use strict";n.d(t,{M:function(){return a},i:function(){return r}});let a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyRegistered",type:"error"},{inputs:[],name:"AlreadyVoted",type:"error"},{inputs:[],name:"BadProposalId",type:"error"},{inputs:[{internalType:"enum Voting.WorkflowStatus",name:"currentStatus",type:"uint8"},{internalType:"enum Voting.WorkflowStatus",name:"expectedStatus",type:"uint8"}],name:"BadWorkflowStatus",type:"error"},{inputs:[],name:"EmptyProposal",type:"error"},{inputs:[],name:"NotRegistered",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"proposalId",type:"uint256"}],name:"ProposalRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"uint256",name:"proposalId",type:"uint256"}],name:"Voted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"voterAddress",type:"address"}],name:"VoterRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"enum Voting.WorkflowStatus",name:"previousStatus",type:"uint8"},{indexed:!1,internalType:"enum Voting.WorkflowStatus",name:"newStatus",type:"uint8"}],name:"WorkflowStatusChange",type:"event"},{inputs:[{internalType:"string",name:"_desc",type:"string"}],name:"addProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"addVoter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"endProposalsRegistering",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"endVotingSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint16",name:"_id",type:"uint16"}],name:"getOneProposal",outputs:[{components:[{internalType:"string",name:"description",type:"string"},{internalType:"uint32",name:"voteCount",type:"uint32"}],internalType:"struct Voting.Proposal",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"getVoter",outputs:[{components:[{internalType:"bool",name:"isRegistered",type:"bool"},{internalType:"bool",name:"hasVoted",type:"bool"},{internalType:"uint16",name:"votedProposalId",type:"uint16"}],internalType:"struct Voting.Voter",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint16",name:"_id",type:"uint16"}],name:"setVote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startProposalsRegistering",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startVotingSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tallyVotes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"winningProposalID",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"workflowStatus",outputs:[{internalType:"enum Voting.WorkflowStatus",name:"",type:"uint8"}],stateMutability:"view",type:"function"}],r="0x96d4039d86F933F6bE56F4bac15c99AD596913C4"},65454:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var a=n(97231),r=n(945),s=n(73335);let i=(0,a.v)({chain:s.D,transport:(0,r.d)()})},73335:function(e,t,n){"use strict";n.d(t,{D:function(){return a}});let a=(0,n(55597).a)({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"SEP",decimals:18},rpcUrls:{default:{http:["https://sepolia.infura.io/v3/c6d42768e82d4ac0a444b7f02f8869fd"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0})}},function(e){e.O(0,[9472,7544,7402,2971,8069,1744],function(){return e(e.s=8883)}),_N_E=e.O()}]);